Turbo Assembler	 Version 4.1	    02/25/20 18:06:30	    Page 1
mem.asm



      1				     .186
      2	0000			     .model tiny
      3	0000			     .code
      4
      5				     local @@
      6				     ;=================================================
      7				     ; Finds the first occurrence of value in memory
      8				     ; Entry:ES	- segment of memory
      9				     ;	     DI	- address of the memory	area in	ES
     10				     ;	     CX	- lenght of the	memory area
     11				     ;	     AL	- value	to find
     12				     ; Exit: DI	- address of the first byte with value AL
     13				     ; Destr:CX
     14				     ;=================================================
     15
     16				     public  memchr
     17
     18	0000			     memchr  proc
     19
     20	0000  FC				     cld
     21	0001  F2> AE				     repne   scasb
     22	0003  74 03				     je	     @@FOUND
     23	0005  BF 0000				     mov     di, 0
     24
     25	0008  4F		     @@FOUND:	     dec     di
     26	0009  C3				     ret
     27	000A			     memchr  endp
     28
     29				     ;=================================================
     30				     ; Compares	first cx bytes of one area of memory with other	one
     31				     ; Entry:DS	- first	memory segment
     32				     ;	     SI	- address of the beginning of the first	area
     33				     ;	     ES	- second memory	segment
     34				     ;	     DI	- address of the beginning of the second area
     35				     ;	     CX	- lenght of the	areas
     36				     ; Exit: AL	- -1 if	first is less, 1 if first is more, 0 if	equal
     37				     ; Destr:CX, SI, DI
     38				     ;=================================================
     39
     40				     public  memcmp
     41
     42	000A			     memcmp  proc
     43
     44	000A  FC				     cld
     45	000B  F2> A6				     repne   cmpsb
     46	000D  77 0D				     ja	     @@BIGGER
     47	000F  4E				     dec     si
     48	0010  4F				     dec     di
     49	0011  AC				     lodsb
     50	0012  26: 3A 05				     cmp     al, byte ptr es:[di]
     51	0015  72 0A				     jb	     @@LESS
     52
     53	0017  B0 00				     mov     al, 0
     54	0019  EB 08 90				     jmp     @@END
     55
     56	001C  B0 01		     @@BIGGER:	     mov     al, 1
     57	001E  EB 03 90				     jmp     @@END
Turbo Assembler	 Version 4.1	    02/25/20 18:06:30	    Page 2
mem.asm



     58
     59	0021  B0 FF		     @@LESS:	     mov     al, -1
     60
     61	0023  C3		     @@END:	     ret
     62	0024			     memcmp  endp
     63
     64				     ;=================================================
     65				     ; Sets value of AL	to each	byte of	the memory area
     66				     ; Entry:ES	- segment of memory
     67				     ;	     DI	- address of the beginning of the area
     68				     ;	     CX	- lenght of the	area
     69				     ;	     AL	- value	to be set
     70				     ; Destr:DI, CX
     71				     ;=================================================
     72
     73				     public  memset
     74
     75	0024			     memset  proc
     76
     77	0024  FC				     cld
     78	0025  F3> AA				     rep     stosb
     79
     80	0027  C3				     ret
     81	0028			     memset  endp
     82
     83				     ;=================================================
     84				     ; Copies first CX bytes from first	area to	second
     85				     ; Entry:DS	- first	memory segment
     86				     ;	     SI	- the beginning	of the first area
     87				     ;	     ES	- second memory	segment
     88				     ;	     DI	- the beginning	of the second area
     89				     ;	     CX	- lenght of the	first area
     90				     ; Destr:CX, DI, SI
     91				     ;=================================================
     92
     93				     public  memcpy
     94
     95	0028			     memcpy  proc
     96
     97	0028  FC				     cld
     98	0029  F3> A4				     rep     movsb
     99
    100	002B  C3				     ret
    101	002C			     memcpy  endp
    102
    103				     end
Turbo Assembler	 Version 4.1	    02/25/20 18:06:30	    Page 3
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "02/25/20"
??FILENAME			  Text	 "mem	  "
??TIME				  Text	 "18:06:29"
??VERSION			  Number 040A
@32BIT				  Text	 0
@@				  Number [DGROUP:BP-0002]
@@BIGGER			  Near	 DGROUP:001C
@@END				  Near	 DGROUP:0023
@@FOUND				  Near	 DGROUP:0008
@@LESS				  Near	 DGROUP:0021
@CODE				  Text	 DGROUP
@CODESIZE			  Text	 0
@CPU				  Text	 0103H
@CURSEG				  Text	 _TEXT
@DATA				  Text	 DGROUP
@DATASIZE			  Text	 0
@FILENAME			  Text	 MEM
@INTERFACE			  Text	 000H
@MODEL				  Text	 1
@STACK				  Text	 DGROUP
@WORDSIZE			  Text	 2
MEMCHR				  Near	 DGROUP:0000
MEMCMP				  Near	 DGROUP:000A
MEMCPY				  Near	 DGROUP:0028
MEMSET				  Near	 DGROUP:0024

Groups & Segments		  Bit Size Align  Combine Class

DGROUP				  Group
  _DATA				  16  0000 Word	  Public  DATA
  _TEXT				  16  002C Word	  Public  CODE
