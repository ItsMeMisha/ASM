Turbo Assembler	 Version 4.1	    02/25/20 18:07:45	    Page 1
str.asm



      1				     .186
      2				     locals @@
      3	0000			     .model tiny
      4	0000			     .code
      5
      6				     ;=================================================
      7				     ; Finds lenght of the string
      8				     ; Entry:ES	- segment of memory
      9				     ;	     DI	- address of the string
     10				     ; Exit: AX	- lenght of the	string
     11				     ; Destr:CX, DI
     12				     ;=================================================
     13
     14				     public  strlen
     15
     16	0000			     strlen  proc
     17
     18	0000  B0 00				     mov     al, 0h
     19	0002  B9 FFFF				     mov     cx, 0ffffh
     20	0005  FC				     cld
     21	0006  F2> AE				     repne   scasb
     22	0008  B8 FFFF				     mov     ax, 0ffffh
     23	000B  2B C1				     sub     ax, cx
     24	000D  40				     inc     ax
     25
     26	000E  C3				     ret
     27	000F			     strlen  endp
     28
     29				     ;=================================================
     30				     ; Finds the first occurrence of character in string
     31				     ; Entry:ES	- segment of memory
     32				     ;	     DI	- string address
     33				     ;	     AL	- char to find
     34				     ; Exit: DI	- address of the character
     35				     ; Destr:CX, BL
     36				     ;=================================================
     37
     38				     public  strchr
     39
     40	000F			     strchr  proc
     41
     42	000F  8A D8				     mov     bl, al
     43	0011  E8 FFEC				     call    strlen
     44	0014  8B C8				     mov     cx, ax
     45	0016  8A D8				     mov     bl, al
     46
     47	0018  FC				     cld
     48	0019  F2> AE				     repne   scasb
     49	001B  74 06				     je	     @@FOUND
     50	001D  BF 0000				     mov     di, 0
     51	0020  EB 02 90				     jmp     @@EXIT
     52
     53	0023  4F		     @@FOUND:	     dec     di
     54
     55	0024  C3		     @@EXIT:	     ret
     56	0025			     strchr  endp
     57
Turbo Assembler	 Version 4.1	    02/25/20 18:07:45	    Page 2
str.asm



     58				     ;=================================================
     59				     ; Copies first string to second
     60				     ; Entry:DS	- segment of the first string
     61				     ;	     SI	- address of the beginning of the first	string
     62				     ;	     ES	- segment of the second	string
     63				     ;	     DI	- address of the beginning of the second string
     64				     ; Destr;SI, DI, CX, AX
     65				     ;=================================================
     66
     67				     public  strcpy
     68
     69	0025			     strcpy  proc
     70
     71	0025  06				     push    es
     72	0026  57				     push    di
     73	0027  1E				     push    ds
     74	0028  07				     pop     es
     75	0029  8B FE				     mov     di, si
     76
     77	002B  E8 FFD2				     call    strlen
     78	002E  8B C8				     mov     cx, ax
     79
     80	0030  5F				     pop     di
     81	0031  07				     pop     es
     82
     83	0032  FC				     cld
     84	0033  F3> A4				     rep     movsb
     85
     86	0035  C3				     ret
     87	0036			     strcpy  endp
     88
     89				     ;=================================================
     90				     ; Compares	the first string with the second
     91				     ; Entry:DS	- segment of the first string
     92				     ;	     SI	- address of the beginning of the first	string
     93				     ;	     ES	- segment of the second	string
     94				     ;	     DI	- address of the beginning of the second string;
     95				     ; Exit: AL	- result of the	comparing
     96				     ; Destr:SI, DI
     97				     ;=================================================
     98
     99				     public  strcmp
    100
    101	0036			     strcmp  proc
    102
    103	0036  E8 FFC7				     call    strlen
    104	0039  8B C8				     mov     cx, ax
    105
    106	003B  FC				     cld
    107	003C  F3> A6				     rep     cmpsb
    108	003E  77 0D				     ja	     @@BIG
    109	0040  4E				     dec     si
    110	0041  4F				     dec     di
    111	0042  AC				     lodsb
    112	0043  26: 3A 05				     cmp     al, byte ptr es:[di]
    113	0046  72 0A				     jb	     @@LESS
    114
Turbo Assembler	 Version 4.1	    02/25/20 18:07:45	    Page 3
str.asm



    115	0048  B0 00				     mov     al, 0
    116	004A  EB 08 90				     jmp     @@END
    117
    118	004D  B0 01		     @@BIG:	     mov     al, 1
    119	004F  EB 03 90				     jmp     @@END
    120
    121	0052  B0 FF		     @@LESS:	     mov     al, -1
    122
    123	0054  C3		     @@END:	     ret
    124	0055			     strcmp  endp
    125
    126				     end
Turbo Assembler	 Version 4.1	    02/25/20 18:07:45	    Page 4
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "02/25/20"
??FILENAME			  Text	 "str	  "
??TIME				  Text	 "18:07:45"
??VERSION			  Number 040A
@32BIT				  Text	 0
@@BIG				  Near	 DGROUP:004D
@@END				  Near	 DGROUP:0054
@@EXIT				  Near	 DGROUP:0024
@@FOUND				  Near	 DGROUP:0023
@@LESS				  Near	 DGROUP:0052
@CODE				  Text	 DGROUP
@CODESIZE			  Text	 0
@CPU				  Text	 0103H
@CURSEG				  Text	 _TEXT
@DATA				  Text	 DGROUP
@DATASIZE			  Text	 0
@FILENAME			  Text	 STR
@INTERFACE			  Text	 000H
@MODEL				  Text	 1
@STACK				  Text	 DGROUP
@WORDSIZE			  Text	 2
STRCHR				  Near	 DGROUP:000F
STRCMP				  Near	 DGROUP:0036
STRCPY				  Near	 DGROUP:0025
STRLEN				  Near	 DGROUP:0000

Groups & Segments		  Bit Size Align  Combine Class

DGROUP				  Group
  _DATA				  16  0000 Word	  Public  DATA
  _TEXT				  16  0055 Word	  Public  CODE
