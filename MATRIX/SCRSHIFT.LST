Turbo Assembler	 Version 4.1	    03/15/20 22:33:09	    Page 1
scrshift.asm



      1				     .186
      2	0000			     .model tiny
      3
      4				     locals  @@
      5
      6	0000			     .code
      7				     org     100h
      8
      9				     public  scrsft
     10
     11				     ;=================================================
     12				     ; Moves all lines of the screen down (last	line to	the top)
     13				     ;=================================================
     14
     15	0100			     scrsft	     proc
     16
     17	0100  60				     pusha
     18	0101  06 57				     push    es	di
     19	0103  B8 B800				     mov     ax, 0b800h
     20	0106  8E C0				     mov     es, ax
     21
     22	0108  B9 004F				     mov     cx, 79d
     23	010B  BB 0000				     mov     bx, 0h
     24	010E  BF 0F00				     mov     di, 80*24*2
     25
     26	0111  26: 8A 05		     @@FILLBUF:	     mov     al, byte ptr es:[di]
     27	0114  2E: 88 87	014Dr			     mov     cs:LASTLINE[bx], al
     28	0119  83 C7 02				     add     di, 2
     29	011C  43				     inc     bx
     30
     31	011D  E2 F2				     loop    @@FILLBUF
     32
     33	011F  BB 0F00				     mov     bx, 80*24*2
     34	0122  83 EB 02		     @@DOSHIFT:	     sub     bx, 2
     35	0125  26: 8A 07				     mov     al, byte ptr es:[bx]
     36	0128  26: 88 87	00A0			     mov     byte ptr es:[bx+160], al
     37	012D  83 FB 00				     cmp     bx, 0h
     38	0130  77 F0				     ja	     @@DOSHIFT
     39
     40	0132  BF 0000				     mov     di, 0h
     41	0135  BB 0000				     mov     bx, 0h
     42	0138  B9 004F				     mov     cx, 79d
     43
     44	013B  2E: 8A 87	014Dr	     @@EMPTYBUF:     mov     al, cs:LASTLINE[bx]
     45	0140  26: 88 05				     mov     byte ptr es:[di], al
     46	0143  83 C7 02				     add     di, 2
     47	0146  43				     inc     bx
     48	0147  E2 F2				     loop    @@EMPTYBUF
     49
     50	0149  5F 07				     pop     di	es
     51	014B  61				     popa
     52
     53	014C  C3				     ret
     54	014D					     endp
     55
     56	014D  52*(??)		     LASTLINE	     db	82d dup	 (?)
     57
Turbo Assembler	 Version 4.1	    03/15/20 22:33:09	    Page 2
scrshift.asm



     58
     59				     end
Turbo Assembler	 Version 4.1	    03/15/20 22:33:09	    Page 3
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "03/15/20"
??FILENAME			  Text	 "scrshift"
??TIME				  Text	 "22:33:09"
??VERSION			  Number 040A
@32BIT				  Text	 0
@@DOSHIFT			  Near	 DGROUP:0122
@@EMPTYBUF			  Near	 DGROUP:013B
@@FILLBUF			  Near	 DGROUP:0111
@CODE				  Text	 DGROUP
@CODESIZE			  Text	 0
@CPU				  Text	 0103H
@CURSEG				  Text	 _TEXT
@DATA				  Text	 DGROUP
@DATASIZE			  Text	 0
@FILENAME			  Text	 SCRSHIFT
@INTERFACE			  Text	 000H
@MODEL				  Text	 1
@STACK				  Text	 DGROUP
@WORDSIZE			  Text	 2
LASTLINE			  Byte	 DGROUP:014D
SCRSFT				  Near	 DGROUP:0100

Groups & Segments		  Bit Size Align  Combine Class

DGROUP				  Group
  _DATA				  16  0000 Word	  Public  DATA
  _TEXT				  16  019F Word	  Public  CODE
