Turbo Assembler	 Version 4.1	    03/03/20 15:17:34	    Page 1
new09.asm



      1				     .186
      2	0000			     .model tiny
      3	0000			     .code
      4				     org 100h
      5
      6				     public  Old09
      7				     public  New09
      8
      9				     extrn   al2hex  :proc
     10				     extrn   framedr :proc
     11				     extrn   EndLabel
     12
     13				     ;=================================================
     14				     ; New int 09h that	writes scancode	in hex of the pushed key in frame
     15				     ;=================================================
     16
     17	0100			     New09   proc
     18	0100  50 53 51 52 57 56	06		     push    ax	bx cx dx di si es
     19	0107  B8 B800				     mov     ax, 0b800h
     20	010A  8E C0				     mov     es, ax
     21	010C  BF 053C				     mov     di, (8*80+30)*2
     22	010F  B9 0014				     mov     cx, 20
     23	0112  BA 0005				     mov     dx, 5
     24	0115  E8 0000e				     call    framedr
     25	0118  E4 60				     in	     al, 60h
     26	011A  E8 0000e				     call    Al2Hex
     27	011D  BF 0690				     mov     di, (10*80+40)*2
     28	0120  B4 4E				     mov     ah, 4eh
     29	0122  8A C6				     mov     al, dh
     30	0124  AB				     stosw
     31	0125  8A C2				     mov     al, dl
     32	0127  AB				     stosw
     33
     34				     ;		     mov     dl, al
     35	0128  E4 61				     in	     al, 61h
     36	012A  8A E0				     mov     ah, al
     37	012C  0C 80				     or	     al, 80h
     38	012E  E6 61				     out     61h, al
     39	0130  86 C4				     xchg    al, ah
     40	0132  E6 61				     out     61h, al
     41
     42	0134  B0 20				     mov     al, 20h
     43	0136  E6 20				     out     20h, al
     44
     45	0138  07 5E 5F 5A 59 5B	58		     pop     es	si di dx cx bx ax
     46
     47	013F  EA				     db	     0eah
     48	0140  0000		     Old09	     dw	     0
     49	0142  0000				     dw	     0
     50
     51	0144					     endp
     52
     53				     end
Turbo Assembler	 Version 4.1	    03/03/20 15:17:34	    Page 2
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "03/03/20"
??FILENAME			  Text	 "new09	  "
??TIME				  Text	 "15:17:34"
??VERSION			  Number 040A
@32BIT				  Text	 0
@CODE				  Text	 DGROUP
@CODESIZE			  Text	 0
@CPU				  Text	 0103H
@CURSEG				  Text	 _TEXT
@DATA				  Text	 DGROUP
@DATASIZE			  Text	 0
@FILENAME			  Text	 NEW09
@INTERFACE			  Text	 000H
@MODEL				  Text	 1
@STACK				  Text	 DGROUP
@WORDSIZE			  Text	 2
AL2HEX				  Near	 DGROUP:---- Extern
ENDLABEL			  Word	 DGROUP:---- Extern
FRAMEDR				  Near	 DGROUP:---- Extern
NEW09				  Near	 DGROUP:0100
OLD09				  Word	 DGROUP:0140

Groups & Segments		  Bit Size Align  Combine Class

DGROUP				  Group
  _DATA				  16  0000 Word	  Public  DATA
  _TEXT				  16  0144 Word	  Public  CODE
